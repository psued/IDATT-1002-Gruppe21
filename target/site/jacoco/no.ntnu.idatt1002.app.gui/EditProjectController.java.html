<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>EditProjectController.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">IDATT1002Project</a> &gt; <a href="index.source.html" class="el_package">no.ntnu.idatt1002.app.gui</a> &gt; <span class="el_source">EditProjectController.java</span></div><h1>EditProjectController.java</h1><pre class="source lang-java linenums">package no.ntnu.idatt1002.app.gui;

import java.io.IOException;
import java.time.LocalDate;
import java.util.ArrayList;
import java.util.List;
import java.util.Objects;
import java.util.Optional;
import javafx.fxml.FXML;
import javafx.fxml.FXMLLoader;
import javafx.scene.Parent;
import javafx.scene.control.Alert;
import javafx.scene.control.Button;
import javafx.scene.control.ButtonType;
import javafx.scene.control.DatePicker;
import javafx.scene.control.Label;
import javafx.scene.control.MenuButton;
import javafx.scene.control.MenuItem;
import javafx.scene.control.TableColumn;
import javafx.scene.control.TableView;
import javafx.scene.control.TextArea;
import javafx.scene.control.TextField;
import javafx.scene.control.cell.PropertyValueFactory;
import javafx.scene.input.KeyCode;
import javafx.scene.input.KeyEvent;
import javafx.scene.text.Text;
import no.ntnu.idatt1002.app.BudgetAndAccountingApp;
import no.ntnu.idatt1002.app.data.Expense;
import no.ntnu.idatt1002.app.data.Income;
import no.ntnu.idatt1002.app.data.Project;
import no.ntnu.idatt1002.app.data.Transaction;
import no.ntnu.idatt1002.app.data.User;
import no.ntnu.idatt1002.app.filehandling.FileHandling;

/**
 * FXML Controller class for the EditProject.fxml file. Takes an existing project and allows the
 * user to edit the project information, accounting and budgeting.
 */
<span class="nc" id="L39">public class EditProjectController {</span>
  
  private User tempUser;
  private Project originalProject;
  
  /**
   * Initializes the controller class.
   */
  public void initializeWithData(Project project) throws NullPointerException {
<span class="nc" id="L48">    originalProject = Objects.requireNonNull(project);</span>
<span class="nc" id="L49">    initializeController();</span>
<span class="nc" id="L50">  }</span>
  
  
  // Local Accounting overview
  private ArrayList&lt;Income&gt; accountingIncome;
  private ArrayList&lt;Expense&gt; accountingExpense;
  
  // Local Budgeting overview
  private ArrayList&lt;Income&gt; budgetingIncome;
  private  ArrayList&lt;Expense&gt; budgetingExpense;
  
  // Fundamental project information
  @FXML private TextField name;
  @FXML private MenuButton category;
  @FXML private TextArea description;
  @FXML private DatePicker dueDate;
  
  //Accounting and Budgeting buttons
  @FXML private Button accounting;
  @FXML private Button budgeting;
  
  //Selected transaction status
<span class="nc" id="L72">  private boolean isAccounting = true;</span>
<span class="nc" id="L73">  private Transaction selectedTransaction = null;</span>
  
  //Income Table
  @FXML private TableView&lt;Income&gt; incomeTable;
  @FXML private TableColumn&lt;Income, LocalDate&gt; incomeDate;
  @FXML private TableColumn&lt;Income, String&gt; incomeDescription;
  @FXML private TableColumn&lt;Income, String&gt; incomeCategory;
  @FXML private TableColumn&lt;Income, Double&gt; incomeAmount;
  //Income fields
  @FXML private DatePicker incomeDatePicker;
  @FXML private TextField incomeDescriptionField;
  @FXML private TextField incomeCategoryField;
  @FXML private TextField incomeAmountField;
  
  //Expense Table
  @FXML private TableView&lt;Expense&gt; expenseTable;
  @FXML private TableColumn&lt;Expense, LocalDate&gt; expenseDate;
  @FXML private TableColumn&lt;Expense, String&gt; expenseDescription;
  @FXML private TableColumn&lt;Expense, String&gt; expenseCategory;
  @FXML private TableColumn&lt;Expense, Double&gt; expenseAmount;
  //Expense fields
  @FXML private DatePicker expenseDatePicker;
  @FXML private TextField expenseDescriptionField;
  @FXML private TextField expenseCategoryField;
  @FXML private TextField expenseAmountField;
  
  //Total income, expense and amount overview
  @FXML private Text totalIncome;
  @FXML private Text totalExpense;
  @FXML private Text totalAmount;
  
  //Error message
<span class="nc" id="L105">  @FXML private final Label nameError = new Label();</span>
  
  /**
   * Initializes the controller class. Also sets up the text fields and tables to display the
   * data of the project that is being edited.
   */
  public void initializeController() {
    try {
<span class="nc" id="L113">      tempUser = FileHandling.readUserFromFile();</span>
<span class="nc" id="L114">    } catch (IOException e) {</span>
<span class="nc" id="L115">      e.printStackTrace();</span>
<span class="nc" id="L116">    } catch (ClassNotFoundException e) {</span>
<span class="nc" id="L117">      throw new RuntimeException(e);</span>
    }
    
    // Set up the text fields to display the project information
<span class="nc" id="L121">    name.setText(originalProject.getName());</span>
<span class="nc" id="L122">    category.setText(originalProject.getCategory());</span>
<span class="nc" id="L123">    description.setText(originalProject.getDescription());</span>
<span class="nc" id="L124">    dueDate.setValue(originalProject.getDueDate());</span>
    
<span class="nc" id="L126">    category.getItems().clear();</span>
  
<span class="nc" id="L128">    accountingIncome = originalProject.getAccounting().getIncomeList();</span>
<span class="nc" id="L129">    accountingExpense = originalProject.getAccounting().getExpenseList();</span>
<span class="nc" id="L130">    budgetingIncome = originalProject.getBudgeting().getIncomeList();</span>
<span class="nc" id="L131">    budgetingExpense = originalProject.getBudgeting().getExpenseList();</span>
    
    
    // Add categories to the category menu button
<span class="nc bnc" id="L135" title="All 2 branches missed.">    for (String category : tempUser.getProjectRegistry().getCategories()) {</span>
<span class="nc" id="L136">      MenuItem menuItem = new MenuItem(category);</span>
<span class="nc" id="L137">      menuItem.setOnAction(event -&gt; this.category.setText(menuItem.getText()));</span>
<span class="nc" id="L138">      this.category.getItems().add(menuItem);</span>
    }
    
<span class="nc" id="L141">    accounting.setStyle(&quot;-fx-border-color: #000000&quot;);</span>
    
    // Accounting table
<span class="nc" id="L144">    incomeDate.setCellValueFactory(new PropertyValueFactory&lt;&gt;(&quot;date&quot;));</span>
<span class="nc" id="L145">    incomeDescription.setCellValueFactory(new PropertyValueFactory&lt;&gt;(&quot;description&quot;));</span>
<span class="nc" id="L146">    incomeCategory.setCellValueFactory(new PropertyValueFactory&lt;&gt;(&quot;category&quot;));</span>
<span class="nc" id="L147">    incomeAmount.setCellValueFactory(new PropertyValueFactory&lt;&gt;(&quot;amount&quot;));</span>
    
    // Budgeting table
<span class="nc" id="L150">    expenseDate.setCellValueFactory(new PropertyValueFactory&lt;&gt;(&quot;date&quot;));</span>
<span class="nc" id="L151">    expenseDescription.setCellValueFactory(new PropertyValueFactory&lt;&gt;(&quot;description&quot;));</span>
<span class="nc" id="L152">    expenseCategory.setCellValueFactory(new PropertyValueFactory&lt;&gt;(&quot;category&quot;));</span>
<span class="nc" id="L153">    expenseAmount.setCellValueFactory(new PropertyValueFactory&lt;&gt;(&quot;amount&quot;));</span>
    
    // Set up the tables to display the transactions of the project that is being edited
<span class="nc" id="L156">    refreshLocalOverview();</span>
    
<span class="nc" id="L158">    nameError.setVisible(false);</span>
<span class="nc" id="L159">  }</span>
  
  /**
   * Toggle to accounting view, makes the accounting button style look active. Updates the
   * isAccounting boolean so that when a table is changed, the correct table is updated.
   */
  public void toggleAccounting() {
<span class="nc" id="L166">    accounting.setStyle(&quot;-fx-border-color: #000000&quot;);</span>
<span class="nc" id="L167">    budgeting.setStyle(&quot;-fx-border-color: none&quot;);</span>
<span class="nc" id="L168">    isAccounting = true;</span>
    
<span class="nc" id="L170">    refreshLocalOverview();</span>
<span class="nc" id="L171">  }</span>
  
  /**
   * Toggle to budgeting view, makes the budgeting button style look active. Updates the
   * isAccounting boolean so that when a table is changed, the correct table is updated.
   */
  public void toggleBudgeting() {
<span class="nc" id="L178">    budgeting.setStyle(&quot;-fx-border-color: #000000&quot;);</span>
<span class="nc" id="L179">    accounting.setStyle(&quot;-fx-border-color: none&quot;);</span>
<span class="nc" id="L180">    isAccounting = false;</span>
    
<span class="nc" id="L182">    refreshLocalOverview();</span>
<span class="nc" id="L183">  }</span>
  
  /**
   * Checks if the user has selected an income and if so, it will input the income values into
   * the income fields. If the user has clicked an empty row or the same row twice, the income
   * fields will be reset.
   *
   * &lt;p&gt;Clicking an income row will also update the selectedTransaction variable which has the
   * effect of updating the chosen income rather than creating a new one.
   */
  public void selectedIncome() {
<span class="nc bnc" id="L194" title="All 2 branches missed.">    if (incomeTable.getSelectionModel().getSelectedItem() != selectedTransaction) {</span>
<span class="nc" id="L195">      selectedTransaction = incomeTable.getSelectionModel().getSelectedItem();</span>
<span class="nc bnc" id="L196" title="All 2 branches missed.">      incomeDatePicker.setValue(selectedTransaction.getDate() == null</span>
<span class="nc" id="L197">          ? null : selectedTransaction.getDate());</span>
<span class="nc" id="L198">      incomeDescriptionField.setText(selectedTransaction.getDescription());</span>
<span class="nc" id="L199">      incomeCategoryField.setText(selectedTransaction.getCategory());</span>
<span class="nc" id="L200">      incomeAmountField.setText(String.valueOf(selectedTransaction.getAmount()));</span>
<span class="nc" id="L201">    } else {</span>
<span class="nc" id="L202">      incomeTable.getSelectionModel().clearSelection();</span>
<span class="nc" id="L203">      selectedTransaction = null;</span>
<span class="nc" id="L204">      resetIncomeFields();</span>
    }
<span class="nc" id="L206">  }</span>
  
  /**
   * Checks if the user has selected an expense and if so, it will input the expense values into
   * the expense fields. If the user has clicked an empty row or the same row twice, the expense
   * fields will be reset.
   *
   * &lt;p&gt;Clicking an expense row will also update the selectedTransaction variable which has the
   * effect of updating the chosen expense rather than creating a new one.
   */
  public void selectedExpense() {
<span class="nc bnc" id="L217" title="All 2 branches missed.">    if (expenseTable.getSelectionModel().getSelectedItem() != selectedTransaction) {</span>
<span class="nc" id="L218">      selectedTransaction = expenseTable.getSelectionModel().getSelectedItem();</span>
<span class="nc bnc" id="L219" title="All 2 branches missed.">      expenseDatePicker.setValue(selectedTransaction.getDate() == null</span>
<span class="nc" id="L220">          ? null : selectedTransaction.getDate());</span>
<span class="nc" id="L221">      expenseDescriptionField.setText(selectedTransaction.getDescription());</span>
<span class="nc" id="L222">      expenseCategoryField.setText(selectedTransaction.getCategory());</span>
<span class="nc" id="L223">      expenseAmountField.setText(String.valueOf(selectedTransaction.getAmount()));</span>
<span class="nc" id="L224">    } else {</span>
<span class="nc" id="L225">      expenseTable.getSelectionModel().clearSelection();</span>
<span class="nc" id="L226">      selectedTransaction = null;</span>
<span class="nc" id="L227">      resetExpenseFields();</span>
    }
<span class="nc" id="L229">  }</span>
  
  /**
   * When pressing the add button, the addIncomeToLocal method will be called and depending on
   * whether a row is selected or not, the income will be added or updated.
   */
  public void addIncomeToLocal() {
    try {
<span class="nc bnc" id="L237" title="All 2 branches missed.">      if (isAccounting) {</span>
<span class="nc bnc" id="L238" title="All 2 branches missed.">        if (selectedTransaction != null) {</span>
<span class="nc" id="L239">          accountingIncome.remove((Income) selectedTransaction);</span>
<span class="nc" id="L240">          accountingIncome.add(new Income(</span>
<span class="nc" id="L241">              incomeDescriptionField.getText(), incomeCategoryField.getText(), Double.parseDouble(</span>
<span class="nc" id="L242">              incomeAmountField.getText()), incomeDatePicker.getValue()));</span>
<span class="nc" id="L243">        } else {</span>
<span class="nc" id="L244">          accountingIncome.add(new Income(</span>
<span class="nc" id="L245">              incomeDescriptionField.getText(), incomeCategoryField.getText(), Double.parseDouble(</span>
<span class="nc" id="L246">              incomeAmountField.getText()), incomeDatePicker.getValue()));</span>
        }
<span class="nc" id="L248">      } else {</span>
<span class="nc bnc" id="L249" title="All 2 branches missed.">        if (selectedTransaction != null) {</span>
<span class="nc" id="L250">          budgetingIncome.remove((Income) selectedTransaction);</span>
<span class="nc" id="L251">          budgetingIncome.add(new Income(</span>
<span class="nc" id="L252">              incomeDescriptionField.getText(), incomeCategoryField.getText(), Double.parseDouble(</span>
<span class="nc" id="L253">              incomeAmountField.getText()), incomeDatePicker.getValue()));</span>
<span class="nc" id="L254">        } else {</span>
<span class="nc" id="L255">          budgetingIncome.add(new Income(</span>
<span class="nc" id="L256">              incomeDescriptionField.getText(), incomeCategoryField.getText(), Double.parseDouble(</span>
<span class="nc" id="L257">              incomeAmountField.getText()), incomeDatePicker.getValue()));</span>
        }
      }

      
<span class="nc" id="L262">      refreshLocalOverview();</span>
<span class="nc" id="L263">      resetIncomeFields();</span>
      
<span class="nc" id="L265">    } catch (NumberFormatException e) {</span>
<span class="nc" id="L266">      nameError.setText(&quot;Please enter a valid amount&quot;);</span>
<span class="nc" id="L267">      nameError.setVisible(true);</span>
<span class="nc" id="L268">    } catch (IllegalArgumentException e) {</span>
<span class="nc" id="L269">      nameError.setText(e.getMessage());</span>
<span class="nc" id="L270">      nameError.setVisible(true);</span>
    }
<span class="nc" id="L272">  }</span>
  
  /**
   * When pressing the add button, the addExpenseToLocal method will be called and depending on
   * whether a row is selected or not, the expense will be added or updated.
   */
  public void addExpenseToLocal() {
    try {
<span class="nc bnc" id="L280" title="All 2 branches missed.">      if (isAccounting) {</span>
<span class="nc bnc" id="L281" title="All 2 branches missed.">        if (selectedTransaction != null) {</span>
<span class="nc" id="L282">          accountingExpense.remove((Expense) selectedTransaction);</span>
<span class="nc" id="L283">          accountingExpense.add(new Expense(</span>
<span class="nc" id="L284">              expenseDescriptionField.getText(), expenseCategoryField.getText(), Double.parseDouble(</span>
<span class="nc" id="L285">              expenseAmountField.getText()), expenseDatePicker.getValue()));</span>
<span class="nc" id="L286">        } else {</span>
<span class="nc" id="L287">          accountingExpense.add(new Expense(</span>
<span class="nc" id="L288">              expenseDescriptionField.getText(), expenseCategoryField.getText(), Double.parseDouble(</span>
<span class="nc" id="L289">              expenseAmountField.getText()), expenseDatePicker.getValue()));</span>
        }
<span class="nc" id="L291">      } else {</span>
<span class="nc bnc" id="L292" title="All 2 branches missed.">        if (selectedTransaction != null) {</span>
<span class="nc" id="L293">          budgetingExpense.remove((Expense) selectedTransaction);</span>
<span class="nc" id="L294">          budgetingExpense.add(new Expense(</span>
<span class="nc" id="L295">              expenseDescriptionField.getText(), expenseCategoryField.getText(), Double.parseDouble(</span>
<span class="nc" id="L296">              expenseAmountField.getText()), expenseDatePicker.getValue()));</span>
<span class="nc" id="L297">        } else {</span>
<span class="nc" id="L298">          budgetingExpense.add(new Expense(</span>
<span class="nc" id="L299">              expenseDescriptionField.getText(), expenseCategoryField.getText(), Double.parseDouble(</span>
<span class="nc" id="L300">              expenseAmountField.getText()), expenseDatePicker.getValue()));</span>
        }
      }
      
<span class="nc" id="L304">      refreshLocalOverview();</span>
<span class="nc" id="L305">      resetExpenseFields();</span>
      
<span class="nc" id="L307">    } catch (NumberFormatException e) {</span>
<span class="nc" id="L308">      nameError.setText(&quot;Please enter a valid amount&quot;);</span>
<span class="nc" id="L309">      nameError.setVisible(true);</span>
<span class="nc" id="L310">    } catch (IllegalArgumentException e) {</span>
<span class="nc" id="L311">      nameError.setText(e.getMessage());</span>
<span class="nc" id="L312">      nameError.setVisible(true);</span>
    }
<span class="nc" id="L314">  }</span>
  
  /**
   * Removes a transaction from the local overview when the delete or backspace key is pressed.
   * Also checks if the overview is set to accounting or budgeting.
   */
  @FXML
  public void removeTransaction(KeyEvent event) {
<span class="nc bnc" id="L322" title="All 4 branches missed.">    if (event.getCode() == KeyCode.DELETE || event.getCode() == KeyCode.BACK_SPACE) {</span>
      
<span class="nc bnc" id="L324" title="All 2 branches missed.">      List&lt;? extends Transaction&gt; transactionList = isAccounting</span>
<span class="nc bnc" id="L325" title="All 2 branches missed.">          ? (selectedTransaction instanceof Income ? accountingIncome : accountingExpense)</span>
<span class="nc bnc" id="L326" title="All 2 branches missed.">          : (selectedTransaction instanceof Income ? budgetingIncome : budgetingExpense);</span>
      
<span class="nc bnc" id="L328" title="All 2 branches missed.">      if (selectedTransaction != null) {</span>
<span class="nc" id="L329">        transactionList.remove(selectedTransaction);</span>
      }
      
<span class="nc" id="L332">      refreshLocalOverview();</span>
    }
<span class="nc" id="L334">  }</span>
  
  /**
   * Refreshes the local overview by updating the tables and totals, resetting the selected row
   * and resets the error message.
   */
  private void refreshLocalOverview() {
<span class="nc" id="L341">    selectedTransaction = null;</span>
    
    // Update tables
<span class="nc" id="L344">    incomeTable.getItems().clear();</span>
<span class="nc" id="L345">    expenseTable.getItems().clear();</span>
    
<span class="nc bnc" id="L347" title="All 2 branches missed.">    incomeTable.getItems().addAll(isAccounting ? accountingIncome : budgetingIncome);</span>
<span class="nc bnc" id="L348" title="All 2 branches missed.">    expenseTable.getItems().addAll(isAccounting ? accountingExpense : budgetingExpense);</span>
    
<span class="nc" id="L350">    incomeTable.refresh();</span>
<span class="nc" id="L351">    expenseTable.refresh();</span>
  
    // Update totals
<span class="nc bnc" id="L354" title="All 2 branches missed.">    double incomeAmount = isAccounting ? accountingIncome.stream().mapToDouble(Income::getAmount)</span>
<span class="nc" id="L355">        .sum() : budgetingIncome.stream().mapToDouble(Income::getAmount).sum();</span>
<span class="nc bnc" id="L356" title="All 2 branches missed.">    double expenseAmount = isAccounting ? accountingExpense.stream().mapToDouble(Expense::getAmount)</span>
<span class="nc" id="L357">        .sum() : budgetingExpense.stream().mapToDouble(Expense::getAmount).sum();</span>
  
<span class="nc" id="L359">    totalIncome.setText(String.format(&quot;%.2f kr&quot;, incomeAmount));</span>
<span class="nc" id="L360">    totalExpense.setText(String.format(&quot;- %.2f kr&quot;, expenseAmount));</span>
<span class="nc" id="L361">    totalAmount.setText(String.format(&quot;%.2f kr&quot;, incomeAmount - expenseAmount));</span>
    
    // Reset error message
<span class="nc" id="L364">    nameError.setVisible(false);</span>
<span class="nc" id="L365">    nameError.setText(&quot;&quot;);</span>
<span class="nc" id="L366">  }</span>
  
  // Resets the income fields
  private void resetIncomeFields() {
<span class="nc" id="L370">    incomeDatePicker.setValue(null);</span>
<span class="nc" id="L371">    incomeDescriptionField.setText(&quot;&quot;);</span>
<span class="nc" id="L372">    incomeCategoryField.setText(&quot;&quot;);</span>
<span class="nc" id="L373">    incomeAmountField.setText(&quot;&quot;);</span>
<span class="nc" id="L374">  }</span>
  
  // Resets the expense fields
  private void resetExpenseFields() {
<span class="nc" id="L378">    expenseDatePicker.setValue(null);</span>
<span class="nc" id="L379">    expenseDescriptionField.setText(&quot;&quot;);</span>
<span class="nc" id="L380">    expenseCategoryField.setText(&quot;&quot;);</span>
<span class="nc" id="L381">    expenseAmountField.setText(&quot;&quot;);</span>
<span class="nc" id="L382">  }</span>
  
  /**
   * Updates the project with the new values and saves it to the user registry. It does this by
   * deleting the old project and adding the new one.
   */
  public void saveProject() {
    try {
<span class="nc" id="L390">      Project project = new Project(name.getText(), description.getText(), category.getText(),</span>
<span class="nc" id="L391">          dueDate.getValue());</span>
  
<span class="nc" id="L393">      accountingIncome.forEach(project.getAccounting()::addIncome);</span>
<span class="nc" id="L394">      accountingExpense.forEach(project.getAccounting()::addExpense);</span>
<span class="nc" id="L395">      budgetingIncome.forEach(project.getBudgeting()::addIncome);</span>
<span class="nc" id="L396">      budgetingExpense.forEach(project.getBudgeting()::addExpense);</span>
      
<span class="nc" id="L398">      tempUser.removeProject(originalProject);</span>
<span class="nc" id="L399">      tempUser.addProject(project);</span>
      
      try {
<span class="nc" id="L402">        FileHandling.writeUserToFile(tempUser);</span>
<span class="nc" id="L403">        Parent root = FXMLLoader.load(Objects.requireNonNull(</span>
<span class="nc" id="L404">            Objects.requireNonNull(getClass().getResource(&quot;/AllProjects.fxml&quot;))));</span>
<span class="nc" id="L405">        BudgetAndAccountingApp.setRoot(root);</span>
<span class="nc" id="L406">      } catch (IOException e) {</span>
<span class="nc" id="L407">        e.printStackTrace();</span>
      }
      
<span class="nc" id="L410">    } catch (IllegalArgumentException e) {</span>
<span class="nc" id="L411">      nameError.setVisible(true);</span>
<span class="nc" id="L412">      nameError.setText(e.getMessage());</span>
    }
<span class="nc" id="L414">  }</span>
  
  /**
   * Deletes the current project. A popup will appear prompting the user if the really want to
   * delete the project. If no, the deletion is aborted. If yes, the project is deleted from the
   * registry and the user is returned to the all projects page.
   */
  public void deleteProject() {
<span class="nc" id="L422">    Alert alert = new Alert(Alert.AlertType.CONFIRMATION);</span>
<span class="nc" id="L423">    alert.setTitle(&quot;Delete project&quot;);</span>
<span class="nc" id="L424">    alert.setHeaderText(&quot;Are you sure you want to delete this project?&quot;);</span>
<span class="nc" id="L425">    alert.setContentText(&quot;This action cannot be undone.&quot;);</span>
    
<span class="nc" id="L427">    Optional&lt;ButtonType&gt; result = alert.showAndWait();</span>
    
<span class="nc bnc" id="L429" title="All 4 branches missed.">    if (result.isPresent() &amp;&amp; result.get() == ButtonType.OK) {</span>
<span class="nc" id="L430">      tempUser.removeProject(originalProject);</span>
      try {
        
<span class="nc" id="L433">        FileHandling.writeUserToFile(tempUser);</span>
<span class="nc" id="L434">        Parent root = FXMLLoader.load(</span>
<span class="nc" id="L435">            Objects.requireNonNull(getClass().getResource(&quot;/AllProjects.fxml&quot;)));</span>
<span class="nc" id="L436">        BudgetAndAccountingApp.setRoot(root);</span>
        
<span class="nc" id="L438">      } catch (IOException e) {</span>
<span class="nc" id="L439">        e.printStackTrace();</span>
      }
    }
<span class="nc" id="L442">  }</span>
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.7.202105040129</span></div></body></html>